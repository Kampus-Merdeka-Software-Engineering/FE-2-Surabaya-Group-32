<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deadlinews | Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" rel="stylesheet" />

</head>
    <body class="w-100 min-vh-100">
        <section class="container">
            <div class="row">
                <div id="date" class="col d-flex align-items-center text-truncate">
                    Monday November 12, 2023
                </div>
                <div class="col d-flex fs-1 fw-bold justify-content-center" style="color: #3991C9;">
                    <h1>
                        DEADLINEWS
                    </h1>
                </div>
                <div class="d-flex col align-items-center justify-content-between">
                    <div class="d-flex align-items-center mx-2">
                        <div class="mx-1">
                            25 C
                        </div>
                        <img class="mx-1" style="width: 25px;" src="../../assets/icons8-forecast-96.png" alt="forecast">
                    </div>
                    <div class="mx-2">English</div>
                    <div>
                        <a href="#link-1" class="text-decoration-none">
                            <img style="width: 40px;" src="../../assets/icons8-linkedin-96.png" alt="linkedin">
                        </a>
                        <a href="#link-2" class="text-decoration-none">
                            <img style="width: 40px;" src="../../assets/icons8-twitter-squared-96.png" alt="twitter">
                        </a>
                        <a href="#link-3" class="text-decoration-none">
                            <img style="width: 40px;" src="../../assets/icons8-instagram-96.png" alt="facebook">
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <section class="d-flex container align-items-center text-center my-2">
            <a href="#" class="flex-grow-1 p-2 text-white border-1 border border-dark text-decoration-none" style="background-color: #3991C9; border-radius: 15px 0 0 15px;">
                Featured
            </a>
            <a href="#world" class="flex-grow-1 p-2 text-white border-1 border border-dark text-decoration-none" style="background-color: #3991C9;">
                World
            </a>
            <a href="#indonesia" class="flex-grow-1 p-2 text-white border-1 border border-dark text-decoration-none" style="background-color: #3991C9;">
                Indonesia
            </a>
            <a href="#sports" class="flex-grow-1 p-2 text-white border-1 border border-dark text-decoration-none" style="background-color: #3991C9;">
                Sports
            </a>
            <a href="#business" class="flex-grow-1 p-2 text-white border-1 border border-dark text-decoration-none" style="background-color: #3991C9;">
                Business
            </a>
            <a href="#technology" class="flex-grow-1 p-2 text-white border-1 border border-dark text-decoration-none" style="background-color: #3991C9;">
                Technology
            </a>
            <a href="#travel" class="flex-grow-1 p-2 text-white border-1 border border-dark text-decoration-none" style="background-color: #3991C9;">
                Travel
            </a>
            <a href="#more" class="flex-grow-1 p-2 text-white border-1 border border-dark text-decoration-none" style="background-color: #3991C9; border-radius: 0 15px 15px 0;">
                More
            </a>
        </section>

        <section class="d-flex container flex-column mt-5 justify-content-center align-items-center">
            <div class="fw-bold fs-4">MASUK</div>
            <div class="text-center" style="width: 35%;">
                Gunakan Akun Sosial Media anda untuk mengakses semua fitur Dedline,news 
            </div>
            <div class="align-content-center my-3">
                <img class="mx-1" src="../../assets/facebook.png" alt="facebook" style="width: 40px;">
                <img class="mx-1" src="../../assets/google.png" alt="google" style="width: 40px;">
            </div>
            <div class="my-2">
                Atau masuk dengan akun yang sudah ada
            </div>
            <div style="width: 35%;">
                <form action="http://localhost:3000/login" method="post">
                    <label for="emailForm" class="form-label">
                        Email/Nama pengguna
                    </label>
                    <input type="email" class="form-control" id="emailForm" name="username" placeholder="Email" required>
    
                    <label for="passwordForm" class="form-label my-2">
                        Kata sandi
                    </label>
                    <div class="input-group">
                        <input type="password" id="passwordForm" name="password" class="form-control" placeholder="Password" aria-label="Password" aria-describedby="cek-password" required>
                        <button class="btn btn-outline-secondary" type="button" id="cek-password">
                            <i class="fa-solid fa-eye"></i>
                        </button>
                    </div>
                    <button class="btn my-2 w-100 text-white" style="background-color: #3991C9;">
                        Masuk
                    </button>
                </form>
            </div>
        </section>

        <script>
            //cek reveal password
const cekPassword = document.getElementById('cek-password');
const passwordForm = document.getElementById('passwordForm');
let va = true;
cekPassword.addEventListener('click', () => {
    if (va) {
        passwordForm.type = 'text';
        cekPassword.innerHTML = '<i class="fa-solid fa-eye-slash"></i>';
        va = false;
    } else {
        passwordForm.type = 'password';
        cekPassword.innerHTML = '<i class="fa-solid fa-eye"></i>';
        va = true;
    }
});

// show today datetime
const today = new Date();
const day = today.toLocaleString('default', { weekday: 'long' });
const month = today.toLocaleString('default', { month: 'long' });
const date = today.getDate();
const year = today.getFullYear();
const dateElement = document.getElementById('date');
dateElement.innerHTML = `${day} ${month} ${date}, ${year}`;

// get cookie
function getCookie(cname) {
    let name = cname + "=";
    let ca = document.cookie.split(';');
    for(let i = 0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) == ' ') {
        c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
        return c.substring(name.length, c.length);
        } 
    }
    return "";
  }


// validate login
const checkLogin = async () => {
    try {
        const response = await fetch('http://localhost:3000/validator', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
                'login-token': getCookie('login-token'),
            },
            credentials: 'include',
        });
        const data = await response.json();
        if (data.message === 'Token Valid') {
            return window.location.replace("/app/home");
        }
        return;
    } catch (error) {
        console.error("Error:", error);
    }
}
checkLogin();
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    </body>
</html>